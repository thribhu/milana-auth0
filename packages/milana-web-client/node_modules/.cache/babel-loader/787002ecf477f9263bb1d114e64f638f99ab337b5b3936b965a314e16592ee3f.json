{"ast":null,"code":"// Copyright 2021 The casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport PKCE from 'js-pkce';\nclass Sdk {\n  constructor(config) {\n    this.config = config;\n    if (config.redirectPath === undefined || config.redirectPath === null) {\n      this.config.redirectPath = \"/callback\";\n    }\n    if (config.scope === undefined || config.scope === null) {\n      this.config.scope = \"profile\";\n    }\n    this.pkce = new PKCE({\n      client_id: this.config.clientId,\n      redirect_uri: `${window.location.origin}${this.config.redirectPath}`,\n      authorization_endpoint: `${this.config.serverUrl.trim()}/login/oauth/authorize`,\n      token_endpoint: `${this.config.serverUrl.trim()}/api/login/oauth/access_token`,\n      requested_scopes: this.config.scope || \"profile\",\n      storage: this.config.storage\n    });\n  }\n  getOrSaveState() {\n    const state = sessionStorage.getItem(\"casdoor-state\");\n    if (state !== null) {\n      return state;\n    } else {\n      const state = Math.random().toString(36).slice(2);\n      sessionStorage.setItem(\"casdoor-state\", state);\n      return state;\n    }\n  }\n  clearState() {\n    sessionStorage.removeItem(\"casdoor-state\");\n  }\n  getSignupUrl() {\n    let enablePassword = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (enablePassword) {\n      sessionStorage.setItem(\"signinUrl\", this.getSigninUrl());\n      return `${this.config.serverUrl.trim()}/signup/${this.config.appName}`;\n    } else {\n      return this.getSigninUrl().replace(\"/login/oauth/authorize\", \"/signup/oauth/authorize\");\n    }\n  }\n  getSigninUrl() {\n    const redirectUri = this.config.redirectPath && this.config.redirectPath.includes('://') ? this.config.redirectPath : `${window.location.origin}${this.config.redirectPath}`;\n    const state = this.getOrSaveState();\n    return `${this.config.serverUrl.trim()}/login/oauth/authorize?client_id=${this.config.clientId}&response_type=code&redirect_uri=${encodeURIComponent(redirectUri)}&scope=${this.config.scope}&state=${state}`;\n  }\n  getUserProfileUrl(userName, account) {\n    let param = \"\";\n    if (account !== undefined && account !== null) {\n      param = `?access_token=${account.accessToken}`;\n    }\n    return `${this.config.serverUrl.trim()}/users/${this.config.organizationName}/${userName}${param}`;\n  }\n  getMyProfileUrl(account) {\n    let returnUrl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    let params = \"\";\n    if (account !== undefined && account !== null) {\n      params = `?access_token=${account.accessToken}`;\n      if (returnUrl !== \"\") {\n        params += `&returnUrl=${returnUrl}`;\n      }\n    } else if (returnUrl !== \"\") {\n      params = `?returnUrl=${returnUrl}`;\n    }\n    return `${this.config.serverUrl.trim()}/account${params}`;\n  }\n  async signin(serverUrl, signinPath, code, state) {\n    if (!code || !state) {\n      const params = new URLSearchParams(window.location.search);\n      code = params.get(\"code\");\n      state = params.get(\"state\");\n    }\n    const expectedState = this.getOrSaveState();\n    this.clearState();\n    if (state !== expectedState) {\n      return new Promise((resolve, reject) => {\n        setTimeout(() => {\n          resolve({\n            // @ts-ignore\n            status: \"error\",\n            msg: `invalid state parameter, expected: ${expectedState}, got: ${state}`\n          });\n        }, 10);\n      });\n    }\n    return fetch(`${serverUrl}${signinPath || this.config.signinPath || '/api/signin'}?code=${code}&state=${state}`, {\n      method: \"POST\",\n      credentials: \"include\"\n    }).then(res => res.json());\n  }\n  isSilentSigninRequested() {\n    const params = new URLSearchParams(window.location.search);\n    return params.get(\"silentSignin\") === \"1\";\n  }\n  silentSignin(onSuccess, onFailure) {\n    const iframe = document.createElement('iframe');\n    iframe.style.display = 'none';\n    iframe.src = `${this.getSigninUrl()}&silentSignin=1`;\n    const handleMessage = event => {\n      if (window !== window.parent) {\n        return null;\n      }\n      const message = event.data;\n      if (message.tag !== \"Casdoor\" || message.type !== \"SilentSignin\") {\n        return;\n      }\n      if (message.data === 'success') {\n        onSuccess(message);\n      } else {\n        onFailure(message);\n      }\n    };\n    window.addEventListener('message', handleMessage);\n    document.body.appendChild(iframe);\n  }\n  async popupSignin(serverUrl, signinPath, callback) {\n    const width = 500;\n    const height = 600;\n    const left = window.screen.width / 2 - width / 2;\n    const top = window.screen.height / 2 - height / 2;\n    const popupWindow = window.open(this.getSigninUrl() + \"&popup=1\", \"login\", `width=${width},height=${height},top=${top},left=${left}`);\n    const handleMessage = event => {\n      if (event.origin !== this.config.serverUrl) {\n        return;\n      }\n      if (event.data.type === \"windowClosed\" && callback) {\n        callback(\"login failed\");\n      }\n      if (event.data.type === \"loginSuccess\") {\n        this.signin(serverUrl, signinPath, event.data.data.code, event.data.data.state).then(res => {\n          sessionStorage.setItem(\"token\", res.token);\n          window.location.reload();\n        });\n        popupWindow.close();\n      }\n    };\n    window.addEventListener(\"message\", handleMessage);\n  }\n  async signin_redirect(additionalParams) {\n    window.location.replace(this.pkce.authorizeUrl(additionalParams));\n  }\n  async exchangeForAccessToken(additionalParams) {\n    return this.pkce.exchangeForAccessToken(window.location.href, additionalParams);\n  }\n  async getUserInfo(accessToken) {\n    return fetch(`${this.config.serverUrl.trim()}/api/userinfo`, {\n      method: \"GET\",\n      headers: {\n        \"Authorization\": `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json());\n  }\n}\nexport default Sdk;","map":{"version":3,"names":["PKCE","Sdk","constructor","config","redirectPath","undefined","scope","pkce","client_id","clientId","redirect_uri","window","location","origin","authorization_endpoint","serverUrl","trim","token_endpoint","requested_scopes","storage","getOrSaveState","state","sessionStorage","getItem","Math","random","toString","slice","setItem","clearState","removeItem","getSignupUrl","enablePassword","getSigninUrl","appName","replace","redirectUri","includes","encodeURIComponent","getUserProfileUrl","userName","account","param","accessToken","organizationName","getMyProfileUrl","returnUrl","params","signin","signinPath","code","URLSearchParams","search","get","expectedState","Promise","resolve","reject","setTimeout","status","msg","fetch","method","credentials","then","res","json","isSilentSigninRequested","silentSignin","onSuccess","onFailure","iframe","document","createElement","style","display","src","handleMessage","event","parent","message","data","tag","type","addEventListener","body","appendChild","popupSignin","callback","width","height","left","screen","top","popupWindow","open","token","reload","close","signin_redirect","additionalParams","authorizeUrl","exchangeForAccessToken","href","getUserInfo","headers"],"sources":["/home/dell/dev/upwork/casdoor-auth/milana-casdoor-auth/node_modules/casdoor-js-sdk/lib/esm/sdk.js"],"sourcesContent":["// Copyright 2021 The casbin Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport PKCE from 'js-pkce';\nclass Sdk {\n    constructor(config) {\n        this.config = config;\n        if (config.redirectPath === undefined || config.redirectPath === null) {\n            this.config.redirectPath = \"/callback\";\n        }\n        if (config.scope === undefined || config.scope === null) {\n            this.config.scope = \"profile\";\n        }\n        this.pkce = new PKCE({\n            client_id: this.config.clientId,\n            redirect_uri: `${window.location.origin}${this.config.redirectPath}`,\n            authorization_endpoint: `${this.config.serverUrl.trim()}/login/oauth/authorize`,\n            token_endpoint: `${this.config.serverUrl.trim()}/api/login/oauth/access_token`,\n            requested_scopes: this.config.scope || \"profile\",\n            storage: this.config.storage,\n        });\n    }\n    getOrSaveState() {\n        const state = sessionStorage.getItem(\"casdoor-state\");\n        if (state !== null) {\n            return state;\n        }\n        else {\n            const state = Math.random().toString(36).slice(2);\n            sessionStorage.setItem(\"casdoor-state\", state);\n            return state;\n        }\n    }\n    clearState() {\n        sessionStorage.removeItem(\"casdoor-state\");\n    }\n    getSignupUrl(enablePassword = true) {\n        if (enablePassword) {\n            sessionStorage.setItem(\"signinUrl\", this.getSigninUrl());\n            return `${this.config.serverUrl.trim()}/signup/${this.config.appName}`;\n        }\n        else {\n            return this.getSigninUrl().replace(\"/login/oauth/authorize\", \"/signup/oauth/authorize\");\n        }\n    }\n    getSigninUrl() {\n        const redirectUri = this.config.redirectPath && this.config.redirectPath.includes('://') ? this.config.redirectPath : `${window.location.origin}${this.config.redirectPath}`;\n        const state = this.getOrSaveState();\n        return `${this.config.serverUrl.trim()}/login/oauth/authorize?client_id=${this.config.clientId}&response_type=code&redirect_uri=${encodeURIComponent(redirectUri)}&scope=${this.config.scope}&state=${state}`;\n    }\n    getUserProfileUrl(userName, account) {\n        let param = \"\";\n        if (account !== undefined && account !== null) {\n            param = `?access_token=${account.accessToken}`;\n        }\n        return `${this.config.serverUrl.trim()}/users/${this.config.organizationName}/${userName}${param}`;\n    }\n    getMyProfileUrl(account, returnUrl = \"\") {\n        let params = \"\";\n        if (account !== undefined && account !== null) {\n            params = `?access_token=${account.accessToken}`;\n            if (returnUrl !== \"\") {\n                params += `&returnUrl=${returnUrl}`;\n            }\n        }\n        else if (returnUrl !== \"\") {\n            params = `?returnUrl=${returnUrl}`;\n        }\n        return `${this.config.serverUrl.trim()}/account${params}`;\n    }\n    async signin(serverUrl, signinPath, code, state) {\n        if (!code || !state) {\n            const params = new URLSearchParams(window.location.search);\n            code = params.get(\"code\");\n            state = params.get(\"state\");\n        }\n        const expectedState = this.getOrSaveState();\n        this.clearState();\n        if (state !== expectedState) {\n            return new Promise((resolve, reject) => {\n                setTimeout(() => {\n                    resolve({\n                        // @ts-ignore\n                        status: \"error\",\n                        msg: `invalid state parameter, expected: ${expectedState}, got: ${state}`,\n                    });\n                }, 10);\n            });\n        }\n        return fetch(`${serverUrl}${signinPath || this.config.signinPath || '/api/signin'}?code=${code}&state=${state}`, {\n            method: \"POST\",\n            credentials: \"include\",\n        }).then(res => res.json());\n    }\n    isSilentSigninRequested() {\n        const params = new URLSearchParams(window.location.search);\n        return params.get(\"silentSignin\") === \"1\";\n    }\n    silentSignin(onSuccess, onFailure) {\n        const iframe = document.createElement('iframe');\n        iframe.style.display = 'none';\n        iframe.src = `${this.getSigninUrl()}&silentSignin=1`;\n        const handleMessage = (event) => {\n            if (window !== window.parent) {\n                return null;\n            }\n            const message = event.data;\n            if (message.tag !== \"Casdoor\" || message.type !== \"SilentSignin\") {\n                return;\n            }\n            if (message.data === 'success') {\n                onSuccess(message);\n            }\n            else {\n                onFailure(message);\n            }\n        };\n        window.addEventListener('message', handleMessage);\n        document.body.appendChild(iframe);\n    }\n    async popupSignin(serverUrl, signinPath, callback) {\n        const width = 500;\n        const height = 600;\n        const left = window.screen.width / 2 - width / 2;\n        const top = window.screen.height / 2 - height / 2;\n        const popupWindow = window.open(this.getSigninUrl() + \"&popup=1\", \"login\", `width=${width},height=${height},top=${top},left=${left}`);\n        const handleMessage = (event) => {\n            if (event.origin !== this.config.serverUrl) {\n                return;\n            }\n            if (event.data.type === \"windowClosed\" && callback) {\n                callback(\"login failed\");\n            }\n            if (event.data.type === \"loginSuccess\") {\n                this.signin(serverUrl, signinPath, event.data.data.code, event.data.data.state)\n                    .then((res) => {\n                    sessionStorage.setItem(\"token\", res.token);\n                    window.location.reload();\n                });\n                popupWindow.close();\n            }\n        };\n        window.addEventListener(\"message\", handleMessage);\n    }\n    async signin_redirect(additionalParams) {\n        window.location.replace(this.pkce.authorizeUrl(additionalParams));\n    }\n    async exchangeForAccessToken(additionalParams) {\n        return this.pkce.exchangeForAccessToken(window.location.href, additionalParams);\n    }\n    async getUserInfo(accessToken) {\n        return fetch(`${this.config.serverUrl.trim()}/api/userinfo`, {\n            method: \"GET\",\n            headers: {\n                \"Authorization\": `Bearer ${accessToken}`,\n                \"Content-Type\": \"application/json\"\n            },\n        }).then(res => res.json());\n    }\n}\nexport default Sdk;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}